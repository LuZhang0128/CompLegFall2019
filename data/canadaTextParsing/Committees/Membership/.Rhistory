filter(year == 1982) %>%
count(sex == "M")
?aggregate
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4) %>%
select(name))
library(babynames)
library(tidyverse)
library(gapminder)
# For the year 2017, find the most common name among females.
babynames %>%
filter(year == 2017) %>%
filter(sex == "F" ) %>%
arrange(desc(n))
# For the year 1982, find the number of males.
babynames %>%
filter(year == 1982) %>%
count(sex == "M")
# For each year, find the number of distinct male and female names given in that year.
babynames %>%
group_by(year) %>%
distinct(name) %>%
count()
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4) %>%
select(name))
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
qplot(top_names_2017, babynames$prop, babynames)
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
x <- babynames %>%
select(name == "Emma"|| name == "Olivia" || name == "Liam" || name == "Noah")
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
x <- babynames %>%
filter(year == 2017) %>%
select( name == "Emma"|| name == "Olivia" || name == "Liam" || name == "Noah")
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
x <- babynames %>%
filter(year == 2017) %>%
filter( name == "Emma"|| name == "Olivia" || name == "Liam" || name == "Noah")
View(x)
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
x <- babynames %>%
filter(year == 2017) %>%
top_n(4) %>%
select(name))
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
x <- babynames %>%
filter(year == 2017) %>%
top_n(4) %>%
select(name)
x <- babynames %>%
filter(year == 2017) %>%
top_n(4) %>%
select(prop)
View(x)
y <- babynames %>%
filter(year == 2017) %>%
top_n(4) %>%
select(prop)
x <- babynames %>%
filter(year == 2017) %>%
top_n(4)
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
x <- babynames %>%
filter(year == 2017) %>%
select(name， 1:4)
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
x <- babynames %>%
filter(year == 2017) %>%
select(name, 1:4)
x <- babynames %>%
filter(year == 2017) %>%
select(name, 1:4)
View(x)
top_names <- babynames %>%
filter(!name %in% top_names_2017)
View(top_names)
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
filter(name %in% top_names_2017)
View(y)
View(top_names)
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4) %>%
select(name))
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(n,4) %>%
select(name))
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(prop,4) %>%
select(name))
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, prop) %>%
select(name))
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name))
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
filter(name %in% c("Emma","Olivia"))
View(y)
library(babynames)
library(tidyverse)
library(gapminder)
# For the year 2017, find the most common name among females.
babynames %>%
filter(year == 2017) %>%
filter(sex == "F" ) %>%
arrange(desc(n))
# For the year 1982, find the number of males.
babynames %>%
filter(year == 1982) %>%
count(sex == "M")
# For each year, find the number of distinct male and female names given in that year.
babynames %>%
group_by(year) %>%
distinct(name) %>%
count()
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name))
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
filter(name %in% c("Emma","Olivia"))
qplot(, , )
View(top_names)
filter(name %in% c("Emma","Olivia","Liam","Noah"))
top_names <- babynames %>%
group_by(year)
filter(name %in% c("Emma","Olivia","Liam","Noah"))
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
group_by(year) %>%
filter(name %in% c("Emma","Olivia","Liam","Noah"))
View(top_names)
top_names <- babynames %>%
group_by(year) %>%
filter(name %in% c("Emma","Olivia","Liam","Noah"))
babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name)
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
group_by(year) %>%
filter(name %in% top_names_2017)
qplot(year, prop, top_names, color=name)
qplot(year, prop, data = top_names, geom = 'line', color = name)
top_names <- babynames %>%
group_by(year) %>%
filter(name %in% top_names_2017)
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
group_by(year) %>%
filter(name %in% c("Emma","Olivia","Liam","Noah"))
qplot(year, prop, data = top_names, geom = 'line', color = name)
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name)
<-c("Emma","Olivia","Liam","Noah"))
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name) %>%
c("Emma","Olivia","Liam","Noah"))
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name)
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name))
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name) )
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
group_by(year) %>%
filter(name %in% c("Emma","Olivia","Liam","Noah"))
qplot(year, prop, data = top_clean_names, geom = 'line', color = name)
# The sudden drops in the previous graph come from the fact that it depicts two observations for each year. For each name, the graph represents the number of females and males who were given the name. (Each name is predominantly given to people of a given sex. Unusual name assignments may be part intential, and part results of errors in recording people’s sexes)
top_clean_names <- top_names %>%
filter(prop > 0.0002)
qplot(year, prop, data = top_clean_names, geom = 'line', color = name)
canada_commons_members_parl42 <- read.csv("~/Documents/GitHub/CompLegFall2019/data/canadaTextParsing/Members (CSV)/canada_commons_members_parl42.csv", comment.char="#")
View(canada_commons_members_parl42)
library(babynames)
library(tidyverse)
library(gapminder)
# For the year 2017, find the most common name among females.
babynames %>%
filter(year == 2017) %>%
filter(sex == "F" ) %>%
arrange(desc(n))
# For the year 1982, find the number of males.
babynames %>%
filter(year == 1982) %>%
count(sex == "M")
# For each year, find the number of distinct male and female names given in that year.
babynames %>%
group_by(year) %>%
distinct(name) %>%
count()
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name) )
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
group_by(year) %>%
filter(name %in% top_names_2017)
qplot(year, prop, data = top_names, geom = 'line', color = name)
# The sudden drops in the previous graph come from the fact that it depicts two observations for each year. For each name, the graph represents the number of females and males who were given the name. (Each name is predominantly given to people of a given sex. Unusual name assignments may be part intential, and part results of errors in recording people’s sexes)
top_clean_names <- top_names %>%
filter(prop > 0.0002)
qplot(year, prop, data = top_clean_names, geom = 'line', color = name)
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name)
View(top_names_2017)
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
group_by(year) %>%
filter(name %in% top_names_2017)
qplot(year, prop, data = top_names, geom = 'line', color = name)
library(babynames)
library(tidyverse)
library(gapminder)
# For the year 2017, find the most common name among females.
babynames %>%
filter(year == 2017) %>%
filter(sex == "F" ) %>%
arrange(desc(n))
# For the year 1982, find the number of males.
babynames %>%
filter(year == 1982) %>%
count(sex == "M")
# For each year, find the number of distinct male and female names given in that year.
babynames %>%
group_by(year) %>%
distinct(name) %>%
count()
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name) )
# Use a line graph to display the evolution through time of the proportion of all given names that correspond to one of these four names (one line per name).
top_names <- babynames %>%
group_by(year) %>%
filter(name %in% c("Emma","Olivia","Liam","Noah"))
qplot(year, prop, data = top_names, geom = 'line', color = name)
# The sudden drops in the previous graph come from the fact that it depicts two observations for each year. For each name, the graph represents the number of females and males who were given the name. (Each name is predominantly given to people of a given sex. Unusual name assignments may be part intential, and part results of errors in recording people’s sexes)
top_clean_names <- top_names %>%
filter(prop > 0.0002)
qplot(year, prop, data = top_clean_names, geom = 'line', color = name)
babynames
library(babynames)
library(tidyverse)
library(gapminder)
View(babynames)
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
group_by(sex);
filter(year == 2017) %>%
top_n(4, n) %>%
select(name) )
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
group_by(sex) %>%
filter(year == 2017 | sex) %>%
top_n(4, n) %>%
select(name) )
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
group_by(sex) %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name|sex) )
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
group_by(sex) %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name & sex) )
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
group_by(sex) %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name) )
# Find the four most given names in 2017 (across both sexes). Store these four names into a character vector and call that vector top_names_2017
top_names_2017 <- as.character(babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name, sex) )
babynames %>%
filter(year == 2017) %>%
top_n(4, n) %>%
select(name, sex)
# vote type
votes$type <- "Missing"
votes$type[votes$bill_number != "None" & str_detect(votes$description, "^2nd reading")] <- "Bill: second reading"
votes$type[votes$bill_number != "None" & str_detect(votes$description, "^3rd reading")] <- "Bill: third reading"
votes$type[votes$bill_number != "None" & str_detect(votes$description, "^Concurrence at report stage")] <- "Bill: concurrence at report stage"
votes$type[votes$bill_number != "None" & str_detect(votes$description, "\\(report stage (sub)?amendment")] <- "Bill: amendment at report stage"
votes$type[votes$bill_number != "None" & str_detect(votes$description, "^Time allocation for Bill")] <- "Bill: time allocation"
votes$type[votes$bill_number != "None" & str_detect(votes$description, "^Motion respecting Senate amendments to Bill")] <- "Bill: motion respecting Senate amendments"
votes$type[votes$bill_number != "None" & str_detect(votes$description, "\\(referral (to a committee|of subject)")] <- "Bill: referral to a committee"
votes$type[votes$bill_number != "None" & str_detect(votes$description, "\\(recommittal to a committee")] <- "Bill: recommittal to a committee"
votes$type[votes$bill_number != "None" & str_detect(votes$description, "\\(hoist amendment")] <- "Bill: hoist amendment"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Opposition Motion")] <- "Motion (opposition)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Government Business")] <- "Government business"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Private Members' Business")] <- "Motion (private members' business)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Appointment of an officer")] <- "Other (appointment of an officer)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "Report of the (Standing|Special)")] <- "Other (report)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Budgetary policy")] <- "Other (budgetary policy)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Motion to adjourn the debate")] <- "Motion (to adjourn the debate)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Motion for closure")] <- "Motion (for closure)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Motion to adjourn the House")] <- "Motion (to adjourn the House)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Motion to hear another Member")] <- "Motion (to hear another member)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Motion to proceed to Orders of the Day")] <- "Motion (to proceed to Orders of the Day)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Motion to restore a vote in estimates")] <- "Motion (to restore a vote in estimates)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Motion for the production of papers")] <- "Motion (for the production of papers)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Motion respecting the proceedings and business of the House")] <- "Motion (respecting the proceedings and business of the House)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Ways and Means motion")] <- "Motion (Ways and Means)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Referral of a question of privilege to committee")] <- "Other (referral of a question of privilage to a committee)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Address in Reply to the Speech from the Throne")] <- "Other (address in reply to the Speech from the Throne)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Concurrence in an opposed item")] <- "Concurrence (in an opposed item)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Concurrence in estimates")] <- "Concurrence (in estimates)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Concurrence in Interim Supply")] <- "Concurrence (in interim supply)"
votes$type[votes$bill_number == "None" & str_detect(votes$description, "^Concurrence in the Report")] <- "Concurrence (in a report)"
x <- as.numeric(which(raw=="Chair"))
y <- as.numeric(which(raw=="Vice-Chairs" | raw=="Vice-Chair"))
z <- as.numeric(which(raw=="Members"))
k <- as.numeric(length(raw))
if (is_empty(x)) {
x <- 0
}
if (is_empty(y)) {
y <- x
}
setwd('~/Documents/GitHub/CompLegFall2019/data/canadaTextParsing/Committees/Membership')
file <- "./AGRI_39_2_2007-11-14.html"
# get some information from the name of the file
info <- str_split(file, "_|\\.")
info <- unlist(info)
# read html
html <- read_html(file)
# full_name, last_name, first_name
raw <- html %>%
html_nodes(".title, .first-name") %>%
html_text()
#######################
# load libraries
#######################
# remove objects
rm(list=ls())
# detach all libraries
detachAllPackages <- function() {
basic.packages <- c("package:stats","package:graphics","package:grDevices","package:utils","package:datasets","package:methods","package:base")
package.list <- search()[ifelse(unlist(gregexpr("package:",search()))==1,TRUE,FALSE)]
package.list <- setdiff(package.list,basic.packages)
if (length(package.list)>0)  for (package in package.list) detach(package, character.only=TRUE)
}
detachAllPackages()
# load libraries
pkgTest <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
lapply(c("stringr", "dplyr", "plyr", "tidyverse", "rvest", "zoo", "readxl"), pkgTest)
setwd('~/Documents/GitHub/CompLegFall2019/data/canadaTextParsing/Committees/Membership')
file <- "./AGRI_39_2_2007-11-14.html"
# get some information from the name of the file
info <- str_split(file, "_|\\.")
info <- unlist(info)
# read html
html <- read_html(file)
# full_name, last_name, first_name
raw <- html %>%
html_nodes(".title, .first-name") %>%
html_text()
x <- as.numeric(which(raw=="Chair"))
y <- as.numeric(which(raw=="Vice-Chairs" | raw=="Vice-Chair"))
z <- as.numeric(which(raw=="Members"))
k <- as.numeric(length(raw))
if (is_empty(x)) {
x <- 0
}
if (is_empty(y)) {
y <- x
}
if (is_empty(z)) {
z <- y
}
if (is_empty(k)) {
k <- z
}
title <- "Initiate"
title[c(x:(y-1))] <- "Chair"
title[c(y:(z-1))] <- "Co-chair"
setwd('~/Documents/GitHub/CompLegFall2019/data/canadaTextParsing/Committees/Membership')
file <- "./AGRI_39_2_2007-11-14.html"
# get some information from the name of the file
info <- str_split(file, "_|\\.")
info <- unlist(info)
# read html
html <- read_html(file)
# full_name, last_name, first_name
raw <- html %>%
html_nodes(".title, .first-name") %>%
html_text()
x <- as.numeric(which(raw=="Chair"))
y <- as.numeric(which(raw=="Vice-Chairs" | raw=="Vice-Chair"))
z <- as.numeric(which(raw=="Members"))
k <- as.numeric(length(raw))
title <- "Initiate"
if (is_empty(x)) {
x <- 0
} else {
title[c(x:(y-1))] <- "Chair"
}
if (is_empty(y)) {
y <- x
} else {
title[c(y:(z-1))] <- "Co-chair"
}
if (is_empty(z)) {
z <- y
} else {
title[c(z:k)] <- "Member"
}
if (is_empty(k)) {
k <- z
}
#######################
# load libraries
#######################
# remove objects
rm(list=ls())
# detach all libraries
detachAllPackages <- function() {
basic.packages <- c("package:stats","package:graphics","package:grDevices","package:utils","package:datasets","package:methods","package:base")
package.list <- search()[ifelse(unlist(gregexpr("package:",search()))==1,TRUE,FALSE)]
package.list <- setdiff(package.list,basic.packages)
if (length(package.list)>0)  for (package in package.list) detach(package, character.only=TRUE)
}
detachAllPackages()
# load libraries
pkgTest <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
lapply(c("stringr", "dplyr", "plyr", "tidyverse", "rvest", "zoo", "readxl"), pkgTest)
setwd('~/Documents/GitHub/CompLegFall2019/data/canadaTextParsing/Committees/Membership')
file <- "./AGRI_39_2_2007-11-14.html"
# get some information from the name of the file
info <- str_split(file, "_|\\.")
info <- unlist(info)
# read html
html <- read_html(file)
# full_name, last_name, first_name
raw <- html %>%
html_nodes(".title, .first-name") %>%
html_text()
x <- as.numeric(which(raw=="Chair"))
y <- as.numeric(which(raw=="Vice-Chairs" | raw=="Vice-Chair"))
z <- as.numeric(which(raw=="Members"))
k <- as.numeric(length(raw))
title <- "Initiate"
if (is_empty(x)) {
x <- 0
} else {
title[c(x:(y-1))] <- "Chair"
}
if (is_empty(x)) {
x <- 0
}
if (is_empty(y)) {
y <- x
} else {
title[c(x:(y-1))] <- "Chair"
}
